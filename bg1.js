var gr=Object.defineProperty;var yr=(e,t,n)=>t in e?gr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var C=(e,t,n)=>(yr(e,typeof t!="symbol"?t+"":t,n),n);var le,g,qt,Z,at,en,Re,tn,_e={},nn=[],vr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,we=Array.isArray;function j(e,t){for(var n in t)e[n]=t[n];return e}function rn(e){var t=e.parentNode;t&&t.removeChild(e)}function ge(e,t,n){var i,o,s,a={};for(s in t)s=="key"?i=t[s]:s=="ref"?o=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?le.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)a[s]===void 0&&(a[s]=e.defaultProps[s]);return se(e,a,i,o,null)}function se(e,t,n,i,o){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++qt};return o==null&&g.vnode!=null&&g.vnode(s),s}function N(e){return e.children}function Y(e,t){this.props=e,this.context=t}function ae(e,t){if(t==null)return e.__?ae(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ae(e):null}function sn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return sn(e)}}function Me(e){(!e.__d&&(e.__d=!0)&&Z.push(e)&&!ye.__r++||at!==g.debounceRendering)&&((at=g.debounceRendering)||en)(ye)}function ye(){var e,t,n,i,o,s,a,c;for(Z.sort(Re);e=Z.shift();)e.__d&&(t=Z.length,i=void 0,o=void 0,a=(s=(n=e).__v).__e,(c=n.__P)&&(i=[],(o=j({},s)).__v=s.__v+1,He(c,s,o,n.__n,c.ownerSVGElement!==void 0,s.__h!=null?[a]:null,i,a??ae(s),s.__h),dn(i,s),s.__e!=a&&sn(s)),Z.length>t&&Z.sort(Re));ye.__r=0}function on(e,t,n,i,o,s,a,c,d,u){var l,m,p,f,h,w,y,k=i&&i.__k||nn,b=k.length;for(n.__k=[],l=0;l<t.length;l++)if((f=n.__k[l]=(f=t[l])==null||typeof f=="boolean"||typeof f=="function"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?se(null,f,null,null,f):we(f)?se(N,{children:f},null,null,null):f.__b>0?se(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)!=null){if(f.__=n,f.__b=n.__b+1,(p=k[l])===null||p&&f.key==p.key&&f.type===p.type)k[l]=void 0;else for(m=0;m<b;m++){if((p=k[m])&&f.key==p.key&&f.type===p.type){k[m]=void 0;break}p=null}He(e,f,p=p||_e,o,s,a,c,d,u),h=f.__e,(m=f.ref)&&p.ref!=m&&(y||(y=[]),p.ref&&y.push(p.ref,null,f),y.push(m,f.__c||h,f)),h!=null?(w==null&&(w=h),typeof f.type=="function"&&f.__k===p.__k?f.__d=d=an(f,d,e):d=cn(e,f,p,k,h,d),typeof n.type=="function"&&(n.__d=d)):d&&p.__e==d&&d.parentNode!=e&&(d=ae(p))}for(n.__e=w,l=b;l--;)k[l]!=null&&(typeof n.type=="function"&&k[l].__e!=null&&k[l].__e==n.__d&&(n.__d=ln(i).nextSibling),hn(k[l],k[l]));if(y)for(l=0;l<y.length;l++)un(y[l],y[++l],y[++l])}function an(e,t,n){for(var i,o=e.__k,s=0;o&&s<o.length;s++)(i=o[s])&&(i.__=e,t=typeof i.type=="function"?an(i,t,n):cn(n,i,i,o,i.__e,t));return t}function Q(e,t){return t=t||[],e==null||typeof e=="boolean"||(we(e)?e.some(function(n){Q(n,t)}):t.push(e)),t}function cn(e,t,n,i,o,s){var a,c,d;if(t.__d!==void 0)a=t.__d,t.__d=void 0;else if(n==null||o!=s||o.parentNode==null)e:if(s==null||s.parentNode!==e)e.appendChild(o),a=null;else{for(c=s,d=0;(c=c.nextSibling)&&d<i.length;d+=1)if(c==o)break e;e.insertBefore(o,s),a=s}return a!==void 0?a:o.nextSibling}function ln(e){var t,n,i;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(i=ln(n)))return i}return null}function br(e,t,n,i,o){var s;for(s in n)s==="children"||s==="key"||s in t||ve(e,s,null,n[s],i);for(s in t)o&&typeof t[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===t[s]||ve(e,s,t[s],n[s],i)}function ct(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||vr.test(t)?n:n+"px"}function ve(e,t,n,i,o){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||ct(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||ct(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i||e.addEventListener(t,s?dt:lt,s):e.removeEventListener(t,s?dt:lt,s);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function lt(e){return this.l[e.type+!1](g.event?g.event(e):e)}function dt(e){return this.l[e.type+!0](g.event?g.event(e):e)}function He(e,t,n,i,o,s,a,c,d){var u,l,m,p,f,h,w,y,k,b,x,_,S,E,v,T=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=t.__e=n.__e,t.__h=null,s=[c]),(u=g.__b)&&u(t);try{e:if(typeof T=="function"){if(y=t.props,k=(u=T.contextType)&&i[u.__c],b=u?k?k.props.value:u.__:i,n.__c?w=(l=t.__c=n.__c).__=l.__E:("prototype"in T&&T.prototype.render?t.__c=l=new T(y,b):(t.__c=l=new Y(y,b),l.constructor=T,l.render=wr),k&&k.sub(l),l.props=y,l.state||(l.state={}),l.context=b,l.__n=i,m=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),T.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=j({},l.__s)),j(l.__s,T.getDerivedStateFromProps(y,l.__s))),p=l.props,f=l.state,l.__v=t,m)T.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(T.getDerivedStateFromProps==null&&y!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,b),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,b)===!1||t.__v===n.__v){for(t.__v!==n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),l.__e=!1,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(V){V&&(V.__=t)}),x=0;x<l._sb.length;x++)l.__h.push(l._sb[x]);l._sb=[],l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,b),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,f,h)})}if(l.context=b,l.props=y,l.__P=e,_=g.__r,S=0,"prototype"in T&&T.prototype.render){for(l.state=l.__s,l.__d=!1,_&&_(t),u=l.render(l.props,l.state,l.context),E=0;E<l._sb.length;E++)l.__h.push(l._sb[E]);l._sb=[]}else do l.__d=!1,_&&_(t),u=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++S<25);l.state=l.__s,l.getChildContext!=null&&(i=j(j({},i),l.getChildContext())),m||l.getSnapshotBeforeUpdate==null||(h=l.getSnapshotBeforeUpdate(p,f)),on(e,we(v=u!=null&&u.type===N&&u.key==null?u.props.children:u)?v:[v],t,n,i,o,s,a,c,d),l.base=t.__e,t.__h=null,l.__h.length&&a.push(l),w&&(l.__E=l.__=null),l.__e=!1}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=xr(n.__e,t,n,i,o,s,a,d);(u=g.diffed)&&u(t)}catch(V){t.__v=null,(d||s!=null)&&(t.__e=c,t.__h=!!d,s[s.indexOf(c)]=null),g.__e(V,t,n)}}function dn(e,t){g.__c&&g.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(i){i.call(n)})}catch(i){g.__e(i,n.__v)}})}function xr(e,t,n,i,o,s,a,c){var d,u,l,m=n.props,p=t.props,f=t.type,h=0;if(f==="svg"&&(o=!0),s!=null){for(;h<s.length;h++)if((d=s[h])&&"setAttribute"in d==!!f&&(f?d.localName===f:d.nodeType===3)){e=d,s[h]=null;break}}if(e==null){if(f===null)return document.createTextNode(p);e=o?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,p.is&&p),s=null,c=!1}if(f===null)m===p||c&&e.data===p||(e.data=p);else{if(s=s&&le.call(e.childNodes),u=(m=n.props||_e).dangerouslySetInnerHTML,l=p.dangerouslySetInnerHTML,!c){if(s!=null)for(m={},h=0;h<e.attributes.length;h++)m[e.attributes[h].name]=e.attributes[h].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===e.innerHTML)||(e.innerHTML=l&&l.__html||""))}if(br(e,p,m,o,c),l)t.__k=[];else if(on(e,we(h=t.props.children)?h:[h],t,n,i,o&&f!=="foreignObject",s,a,s?s[0]:n.__k&&ae(n,0),c),s!=null)for(h=s.length;h--;)s[h]!=null&&rn(s[h]);c||("value"in p&&(h=p.value)!==void 0&&(h!==e.value||f==="progress"&&!h||f==="option"&&h!==m.value)&&ve(e,"value",h,m.value,!1),"checked"in p&&(h=p.checked)!==void 0&&h!==e.checked&&ve(e,"checked",h,m.checked,!1))}return e}function un(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(i){g.__e(i,n)}}function hn(e,t,n){var i,o;if(g.unmount&&g.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||un(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){g.__e(s,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&hn(i[o],t,n||typeof e.type!="function");n||e.__e==null||rn(e.__e),e.__=e.__e=e.__d=void 0}function wr(e,t,n){return this.constructor(e,n)}function fn(e,t,n){var i,o,s;g.__&&g.__(e,t),o=(i=typeof n=="function")?null:n&&n.__k||t.__k,s=[],He(t,e=(!i&&n||t).__k=ge(N,null,[e]),o||_e,_e,t.ownerSVGElement!==void 0,!i&&n?[n]:o?null:t.firstChild?le.call(t.childNodes):null,s,!i&&n?n:o?o.__e:t.firstChild,i),dn(s,e)}function kr(e,t,n){var i,o,s,a,c=j({},e.props);for(s in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)s=="key"?i=t[s]:s=="ref"?o=t[s]:c[s]=t[s]===void 0&&a!==void 0?a[s]:t[s];return arguments.length>2&&(c.children=arguments.length>3?le.call(arguments,2):n),se(e.type,c,i||e.key,o||e.ref,null)}function U(e,t){var n={__c:t="__cC"+tn++,__:e,Consumer:function(i,o){return i.children(o)},Provider:function(i){var o,s;return this.getChildContext||(o=[],(s={})[t]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&o.some(function(c){c.__e=!0,Me(c)})},this.sub=function(a){o.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){o.splice(o.indexOf(a),1),c&&c.call(a)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}le=nn.slice,g={__e:function(e,t,n,i){for(var o,s,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),a=o.__d),a)return o.__E=o}catch(c){e=c}throw e}},qt=0,Y.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=j({},this.state),typeof e=="function"&&(e=e(j({},n),this.props)),e&&j(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Me(this))},Y.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Me(this))},Y.prototype.render=N,Z=[],en=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Re=function(e,t){return e.__v.__b-t.__v.__b},ye.__r=0,tn=0;var X,A,Te,ut,ce=0,pn=[],fe=[],ht=g.__b,ft=g.__r,pt=g.diffed,mt=g.__c,_t=g.unmount;function de(e,t){g.__h&&g.__h(A,e,ce||t),ce=0;var n=A.__H||(A.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:fe}),n.__[e]}function I(e){return ce=1,Nr(_n,e)}function Nr(e,t,n){var i=de(X++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):_n(void 0,t),function(c){var d=i.__N?i.__N[0]:i.__[0],u=i.t(d,c);d!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=A,!A.u)){var o=function(c,d,u){if(!i.__c.__H)return!0;var l=i.__c.__H.__.filter(function(p){return p.__c});if(l.every(function(p){return!p.__N}))return!s||s.call(this,c,d,u);var m=!1;return l.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(m=!0)}}),!(!m&&i.__c.props===c)&&(!s||s.call(this,c,d,u))};A.u=!0;var s=A.shouldComponentUpdate,a=A.componentWillUpdate;A.componentWillUpdate=function(c,d,u){if(this.__e){var l=s;s=void 0,o(c,d,u),s=l}a&&a.call(this,c,d,u)},A.shouldComponentUpdate=o}return i.__N||i.__}function P(e,t){var n=de(X++,3);!g.__s&&Fe(n.__H,t)&&(n.__=e,n.i=t,A.__H.__h.push(n))}function mn(e,t){var n=de(X++,4);!g.__s&&Fe(n.__H,t)&&(n.__=e,n.i=t,A.__h.push(n))}function F(e){return ce=5,We(function(){return{current:e}},[])}function We(e,t){var n=de(X++,7);return Fe(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function B(e,t){return ce=8,We(function(){return e},t)}function z(e){var t=A.context[e.__c],n=de(X++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(A)),t.props.value):e.__}function Sr(){for(var e;e=pn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(pe),e.__H.__h.forEach($e),e.__H.__h=[]}catch(t){e.__H.__h=[],g.__e(t,e.__v)}}g.__b=function(e){A=null,ht&&ht(e)},g.__r=function(e){ft&&ft(e),X=0;var t=(A=e.__c).__H;t&&(Te===A?(t.__h=[],A.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=fe,n.__N=n.i=void 0})):(t.__h.forEach(pe),t.__h.forEach($e),t.__h=[],X=0)),Te=A},g.diffed=function(e){pt&&pt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(pn.push(t)!==1&&ut===g.requestAnimationFrame||((ut=g.requestAnimationFrame)||Er)(Sr)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==fe&&(n.__=n.__V),n.i=void 0,n.__V=fe})),Te=A=null},g.__c=function(e,t){t.some(function(n){try{n.__h.forEach(pe),n.__h=n.__h.filter(function(i){return!i.__||$e(i)})}catch(i){t.some(function(o){o.__h&&(o.__h=[])}),t=[],g.__e(i,n.__v)}}),mt&&mt(e,t)},g.unmount=function(e){_t&&_t(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{pe(i)}catch(o){t=o}}),n.__H=void 0,t&&g.__e(t,n.__v))};var gt=typeof requestAnimationFrame=="function";function Er(e){var t,n=function(){clearTimeout(i),gt&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);gt&&(t=requestAnimationFrame(n))}function pe(e){var t=A,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),A=t}function $e(e){var t=A;e.__c=e.__(),A=t}function Fe(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function _n(e,t){return typeof t=="function"?t(e):t}function Tr(e,t){for(var n in t)e[n]=t[n];return e}function yt(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function vt(e){this.props=e}(vt.prototype=new Y).isPureReactComponent=!0,vt.prototype.shouldComponentUpdate=function(e,t){return yt(this.props,e)||yt(this.state,t)};var bt=g.__b;g.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),bt&&bt(e)};var xt=function(e,t){return e==null?null:Q(Q(e).map(t))},Ir={map:xt,forEach:xt,count:function(e){return e?Q(e).length:0},only:function(e){var t=Q(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:Q},Cr=g.__e;g.__e=function(e,t,n,i){if(e.then){for(var o,s=t;s=s.__;)if((o=s.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t)}Cr(e,t,n,i)};var wt=g.unmount;function gn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=Tr({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return gn(i,t,n)})),e}function yn(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return yn(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}function Ie(){this.__u=0,this.t=null,this.__b=null}function vn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function ue(){this.u=null,this.o=null}g.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),wt&&wt(e)},(Ie.prototype=new Y).__c=function(e,t){var n=t.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var o=vn(i.__v),s=!1,a=function(){s||(s=!0,n.__R=null,o?o(c):c())};n.__R=a;var c=function(){if(!--i.__u){if(i.state.__a){var u=i.state.__a;i.__v.__k[0]=yn(u,u.__c.__P,u.__c.__O)}var l;for(i.setState({__a:i.__b=null});l=i.t.pop();)l.forceUpdate()}},d=t.__h===!0;i.__u++||d||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(a,a)},Ie.prototype.componentWillUnmount=function(){this.t=[]},Ie.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=gn(this.__b,n,i.__O=i.__P)}this.__b=null}var o=t.__a&&ge(N,null,e.fallback);return o&&(o.__h=null),[ge(N,null,t.__a?null:e.children),o]};var kt=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(ue.prototype=new Y).__a=function(e){var t=this,n=vn(t.__v),i=t.o.get(e);return i[0]++,function(o){var s=function(){t.props.revealOrder?(i.push(o),kt(t,e,i)):o()};n?n(s):s()}},ue.prototype.render=function(e){this.u=null,this.o=new Map;var t=Q(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},ue.prototype.componentDidUpdate=ue.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){kt(e,n,t)})};var bn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Pr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ar=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Dr=/[A-Z0-9]/g,Lr=typeof document<"u",Rr=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Mr(e,t,n){return t.__k==null&&(t.textContent=""),fn(e,t),typeof n=="function"&&n(),e?e.__c:null}Y.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Y.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Nt=g.event;function $r(){}function Or(){return this.cancelBubble}function Gr(){return this.defaultPrevented}g.event=function(e){return Nt&&(e=Nt(e)),e.persist=$r,e.isPropagationStopped=Or,e.isDefaultPrevented=Gr,e.nativeEvent=e};var Br={enumerable:!1,configurable:!0,get:function(){return this.class}},St=g.vnode;g.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,i=t.type,o={};for(var s in n){var a=n[s];if(!(s==="value"&&"defaultValue"in n&&a==null||Lr&&s==="children"&&i==="noscript"||s==="class"||s==="className")){var c=s.toLowerCase();s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":c==="ondoubleclick"?s="ondblclick":c!=="onchange"||i!=="input"&&i!=="textarea"||Rr(n.type)?c==="onfocus"?s="onfocusin":c==="onblur"?s="onfocusout":Ar.test(s)?s=c:i.indexOf("-")===-1&&Pr.test(s)?s=s.replace(Dr,"-$&").toLowerCase():a===null&&(a=void 0):c=s="oninput",c==="oninput"&&o[s=c]&&(s="oninputCapture"),o[s]=a}}i=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=Q(n.children).forEach(function(d){d.props.selected=o.value.indexOf(d.props.value)!=-1})),i=="select"&&o.defaultValue!=null&&(o.value=Q(n.children).forEach(function(d){d.props.selected=o.multiple?o.defaultValue.indexOf(d.props.value)!=-1:o.defaultValue==d.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",Br)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),t.props=o}(e),e.$$typeof=bn,St&&St(e)};var Et=g.__r;g.__r=function(e){Et&&Et(e),e.__c};var Tt=g.diffed;g.diffed=function(e){Tt&&Tt(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function xn(e){return!!e&&e.$$typeof===bn}function Ur(e){return xn(e)?kr.apply(null,arguments):e}function zr(e){return!!e.__k&&(fn(null,e),!0)}var Hr=0;function r(e,t,n,i,o,s){var a,c,d={};for(c in t)c=="ref"?a=t[c]:d[c]=t[c];var u={type:e,props:d,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Hr,__source:o,__self:s};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)d[c]===void 0&&(d[c]=a[c]);return g.vnode&&g.vnode(u),u}function Wr(e){return{render(t){Mr(t,e)},unmount(){zr(e)}}}let wn="America/New_York";function Fr(e){wn=e}function D(e){e=new Date(e||Date.now());const t={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:wn,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(e).forEach(i=>t[i.type]=i.value),{date:`${t.year}-${t.month}-${t.day}`,time:`${t.hour}:${t.minute}:${t.second}`}}function Vr(e){const t=new Date(e+"T00:00:00"),n=t.toLocaleString("en-US",{month:"long",day:"numeric"}),i=D().date;if(e===i)return`Today, ${n}`;const o=new Date(i);o.setDate(o.getDate()+1);const s=o.toISOString().split("T")[0];return e===s?`Tomorrow, ${n}`:`${t.toLocaleString("en-US",{weekday:"long"})}, ${n}`}function J(e){const t=e.split(":").slice(0,2).map(Number),n=t[0]>=12?"PM":"AM";return t[0]=t[0]%12||12,t.map(i=>String(i).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function It(e){const[t,n]=e.slice(0,19).split("T");return{date:t,time:n}}function be(e){const[t,n]=e.split(":").map(Number);return(t+17)%24*60+n}class kn extends Error{constructor(n){super(`Auth data "${n}" missing or expired`);C(this,"name","ReauthNeeded")}}class jr{constructor(t,n=localStorage){C(this,"onUnauthorized",()=>{});this.storageKey=t,this.storage=n}getData(){try{const t=this.storage.getItem(this.storageKey);if(t){const{swid:n,accessToken:i,expires:o}=JSON.parse(t),s=D(new Date(o)),a=D();if(s.date>a.date||s.date===a.date&&s.time>a.time&&s.time>="17")return{swid:n,accessToken:i}}}catch(t){console.error(t)}throw this.deleteData(),new kn(this.storageKey)}setData(t){this.storage.setItem(this.storageKey,JSON.stringify(t))}deleteData(){this.storage.removeItem(this.storageKey),setTimeout(this.onUnauthorized)}}const Yr=8e3;async function Ve(e,t={}){const{params:n,data:i,timeout:o=Yr,...s}=t;t=s,t.referrer||(t.referrer=""),t.credentials||(t.credentials="omit"),t.cache||(t.cache="no-store"),t.headers={...t.headers||{}},n&&Object.keys(n).length>0&&(e+=(e.includes("?")?"&":"?")+Object.entries(n).filter(([,u])=>u!=="").map(u=>u.map(encodeURIComponent).join("=")).join("&")),i&&(t.method||(t.method="POST"),t.headers={...t.headers,"Content-Type":"application/json"},t.body=JSON.stringify(i));const a=new AbortController;t.signal=a.signal;const c=setTimeout(()=>a.abort(),o);let d;try{d=await fetch(e,t)}catch(u){return console.error(u),{ok:!1,status:0,data:null}}finally{clearTimeout(c)}return{ok:d.ok,status:d.status,data:(d.headers.get("Content-Type")||"").startsWith("application/json")?await d.json():{}}}class Nn extends Error{constructor(){super(...arguments);C(this,"name","InvalidOrigin")}}class ie extends Error{constructor(n,i="Request failed"){super(`${i}: ${JSON.stringify(n)}`);C(this,"name","RequestError");this.response=n}}class je{constructor(t,n){C(this,"data");C(this,"authStore");C(this,"origin");this.data=t,this.origin=this.constructor.origins[this.data.resort],this.authStore=n}static originToResort(t){var o;const i=(o=Object.entries(this.origins).find(([,s])=>s===t))==null?void 0:o[0];if(i)return i;throw new Nn(t)}logOut(){this.authStore.deleteData()}async request(t){const{swid:n,accessToken:i}=this.authStore.getData(),o=this.origin+t.path,s=await Ve(o,{method:t.method||"GET",params:t.params,data:t.data,headers:{Authorization:`BEARER ${i}`,"x-user-id":n}});if(s.status===401)setTimeout(()=>this.authStore.deleteData());else{const{key:a}=t;if(s.ok&&(!a||s.data[a]))return{...s,data:a?s.data[a]:s.data}}throw new ie(s)}}C(je,"origins",{WDW:"https://disneyworld.disney.go.com",DLR:"https://disneyland.disney.go.com"});const Qr="modulepreload",Jr=function(e){return"/bg1/"+e},Ct={},Pt=function(t,n,i){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Jr(s),s in Ct)return;Ct[s]=!0;const a=s.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!i)for(let l=o.length-1;l>=0;l--){const m=o[l];if(m.href===s&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Qr,a||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),a)return new Promise((l,m)=>{u.addEventListener("load",l),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},Kr=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t)))})};async function Zr(e){return{resort:e,...await Kr(Object.assign({"./data/dlr.ts":()=>Pt(()=>import("./dlr.js"),[]),"./data/wdw.ts":()=>Pt(()=>import("./wdw.js"),[])}),`./data/${e.toLowerCase()}.ts`)}}const Xr={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},Ye="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",qr=Ye+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",ei=Ye+"wdpro-assets/avatars/180x180/RetAvatar-180x180",ti=Ye+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",ni={"-":ei,5:ti};function Ce(e){const t=Xr[e||""];if(t)return(ni[t[0]]||qr)+t+".png"}const ri={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"},ii=new Set(["ACTIVITY","DINING"]),q=e=>e.split(";")[0];function Sn(e){const{date:t,time:n}=D();return e.modifiable&&t===e.end.date&&n<=(e.end.time??"")}class si extends Error{constructor(){super(...arguments);C(this,"name","ModifyNotAllowed")}}function At(e){if(e&&!Sn(e))throw new si}class Dt extends je{constructor(n,i,o){super(n,i);C(this,"maxPartySize",12);C(this,"nextBookTime");C(this,"onUnauthorized",()=>{});C(this,"partyIds",new Set);C(this,"guestCache",new Map);C(this,"tracker");C(this,"primaryGuestId","");C(this,"convertGuest",n=>{const{id:i,firstName:o,lastName:s,characterId:a,...c}=n,d=`${o} ${s}`.trim();if(!this.guestCache.has(i))switch(n.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":n.primary&&this.cacheGuest(i,d,a);break;default:this.cacheGuest(i,d,a)}const u=Ce(a);return this.partyIds.size>0&&!this.partyIds.has(i)&&(c.ineligibleReason="NOT_IN_PARTY",delete c.eligibleAfter),{...c,id:i,name:d,avatarImageUrl:u}});this.tracker=o??new oi}setPartyIds(n){this.partyIds=new Set(n)}async experiences(n){var s,a;await this.primeGuestCache();const{data:i}=await this.request({path:`/tipboard-vas/api/v1/parks/${encodeURIComponent(n.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}});this.nextBookTime=(a=(((s=i.eligibility)==null?void 0:s.flexEligibilityWindows)||[]).sort((c,d)=>c.time.time.localeCompare(d.time.time))[0])==null?void 0:a.time.time;const{experiences:o=[]}=this.upcomingDrops(n)[0]??{};return i.availableExperiences.filter(c=>{const d=this.data.experiences[c.id];return d?!0:(d!==null&&console.warn(`Missing experience: ${c.id}`),!1)}).map(c=>({...c,...this.data.experiences[c.id],park:n,experienced:this.tracker.experienced(c),drop:!!o.find(({id:d})=>d===c.id)}))}async guests(n){n||(n={id:"0",park:{id:"0"}});const{data:i}=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:n.id,parkId:n.park.id}});this.primaryGuestId=i.primaryGuestId;const o=i.ineligibleGuests.map(this.convertGuest),s=i.guests.map(this.convertGuest).filter(a=>!("ineligibleReason"in a)||o.push(a)&&!1);return o.sort((a,c)=>{const d=+!a.primary-+!c.primary||a.name.localeCompare(c.name);return a.eligibleAfter||c.eligibleAfter?(a.eligibleAfter||"99").localeCompare(c.eligibleAfter||"99")||d:a.ineligibleReason===c.ineligibleReason?d:a.ineligibleReason==="NOT_IN_PARTY"?1:c.ineligibleReason==="NOT_IN_PARTY"||a.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:c.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:d}),{eligible:s,ineligible:o}}async offer(n,i,o){At(o);const{data:{offer:{id:s,date:a,startTime:c,endTime:d,status:u,changeStatus:l},eligibleGuests:m,ineligibleGuests:p}}=await this.request({path:o?"/ea-vas/api/v1/products/modifications/flex/offers":"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:((o==null?void 0:o.guests)??i).map(f=>f.id),ineligibleGuests:[],primaryGuestId:i.map(f=>f.id).sort((f,h)=>f.localeCompare(h))[0],parkId:n.park.id,experienceId:n.id,selectedTime:n.flex.nextAvailableTime,...o?{date:D().date,modificationType:n.id===o.id?"TIME":"EXPERIENCE"}:{}},userId:!1});return{id:s,start:{date:a,time:c},end:{date:a,time:d},active:u==="ACTIVE",changed:l!=="NONE",guests:{eligible:(m||[]).map(this.convertGuest),ineligible:(p||[]).map(this.convertGuest)},experience:n}}async book(n,i,o){var p;At(i);const s=new Set((o??n.guests.eligible).map(f=>f.id)),{data:a}=await this.request({path:i?"/ea-vas/api/v1/products/modifications/flex/bookings":"/ea-vas/api/v1/products/flex/bookings",method:"POST",userId:!1,data:{offerId:n.id,...i?{date:D().date,modificationType:i.id===n.experience.id?"TIME":"EXPERIENCE",existingEntitlements:i.guests.filter(f=>s.has(f.id)).map(f=>({entitlementId:f.entitlementId,entitlementBookingId:f.bookingId})),guestIdsToExclude:i.guests.filter(f=>!s.has(f.id)).map(f=>f.id)}:{}},key:"booking"}),{singleExperienceDetails:{experienceId:c,parkId:d},entitlements:u,startDateTime:l,endDateTime:m}=a;return{type:"LL",subtype:"G+",...this.getExperience(c,d),bookingId:(p=u[0])==null?void 0:p.id,start:It(l),end:It(m),cancellable:!0,modifiable:!1,guests:u.map(f=>{const h=this.guestCache.get(f.guestId);return{id:f.guestId,name:(h==null?void 0:h.name)||"",avatarImageUrl:Ce(h==null?void 0:h.characterId),entitlementId:f.id}})}}async cancelBooking(n){const o=n.map(s=>s.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${o}`,method:"DELETE",userId:!1})}async bookings(){const{swid:n}=this.authStore.getData(),i=D().date,o=ri[this.data.resort],{data:{items:s=[],assets:a={},profiles:c={}}}=await this.request({path:`/plan/${o}/api/v1/itinerary-items/${n}?item-types=FASTPASS&item-types=DINING&item-types=ACTIVITY&item-types=VIRTUAL_QUEUE_POSITION`,params:{destination:this.data.resort,fields:"items,profiles,assets","guest-locators":n+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":i,"show-friends":"false"},userId:!1}),d=h=>{const{name:w,avatarId:y,type:k}=c[h.id];return{id:q(h.id),name:`${w.firstName} ${w.lastName}`.trim(),avatarImageUrl:Ce(y),...k==="transactional"&&{transactional:!0}}},u=h=>{const w=a[h.asset],k=a[w.facility].location;if(!k)return;const b=this.data.parks.get(q(k))||{id:k,name:a[k].name},x=new Date(h.startDateTime);return{type:"RES",subtype:h.type,id:q(h.asset),park:b,name:w.name,start:D(x),guests:h.guests.map(d).sort((S,E)=>+(E.id===this.primaryGuestId)-+(S.id===this.primaryGuestId)||+!E.transactional-+!S.transactional||S.name.localeCompare(E.name)),bookingId:h.id}},l=h=>{var _;const w={FLEX:"G+",STANDARD:"ILL",DAS:"DAS",FDS:"DAS",OTHER:"OTHER"},y=h.multipleExperiences?"MEP":w[h.kind];if(!y)return;const k=y==="G+",b=a[h.facility];let x={type:"LL",subtype:y,...this.getExperience(h.facility,b.location,b.name),start:{date:h.displayStartDate??i,time:h.displayStartTime},end:{date:h.displayEndDate,time:h.displayEndTime},cancellable:h.cancellable&&k,modifiable:h.modifiable&&k,guests:h.guests.map(S=>({...d(S),entitlementId:S.entitlementId,bookingId:S.bookingId,...S.redemptionsRemaining!==void 0&&{redemptions:S.redemptionsRemaining}})),bookingId:(_=h.guests[0])==null?void 0:_.entitlementId};if(x.modifiable=Sn(x),h.multipleExperiences){const S=h.assets.find(E=>E.original);S&&(x={...x,...this.getExperience(S.content,a[S.content].location)}),x.choices=h.assets.filter(E=>!E.excluded&&!E.original).map(({content:E})=>{const{name:v,location:T}=a[E];return this.getExperience(E,T,v)}).sort((E,v)=>E.name.localeCompare(v.name))}return x},m=h=>{const w=a[h.asset],y=a[w.facility];return{type:"BG",...this.getExperience(w.facility,y.location,w.name),boardingGroup:h.boardingGroup.id,status:h.status,start:D(new Date(h.startDateTime)),guests:h.guests.map(d),bookingId:h.id}},p=h=>{const w=this.data.parks.get(q(a[h.facility].location));if(w)return{type:"APR",id:w.id,name:w.name,park:w,start:D(new Date(h.startDateTime)),guests:h.guests.map(d),bookingId:h.id}},f=s.map(h=>{try{if(h.type==="FASTPASS")return h.kind==="PARK_PASS"?p(h):l(h);if(h.type==="VIRTUAL_QUEUE_POSITION")return m(h);if(h.type&&ii.has(h.type))return u(h)}catch(w){console.error(w)}}).filter(h=>!!h);return this.tracker.update(f,this),f}upcomingDrops(n){const i=D().time.slice(0,5),o=this.data.drops[n.id]??[],s=o.findIndex(({time:a})=>a>=i);return s>=0?o.slice(s):[]}nextDropTime(n){var i;return(i=this.upcomingDrops(n)[0])==null?void 0:i.time}getExperience(n,i,o){var s;return n=q(n),{id:n,name:((s=this.data.experiences[n])==null?void 0:s.name)||o,park:this.data.parks.get(q(i))}}async primeGuestCache(){this.primaryGuestId===""&&(this.primaryGuestId=".",await this.guests())}cacheGuest(n,i,o){this.guestCache.set(n,{name:i,characterId:o})}async request(n){if(n.userId??!0){const{swid:i}=this.authStore.getData();n={...n},n.params={...n.params,userId:i}}return super.request(n)}}const Lt="bg1.genie.bookings";class oi{constructor(){C(this,"date");C(this,"expIds",new Set);C(this,"experiencedExpIds",new Set);const{date:t=D().date,expIds:n=[],experiencedExpIds:i=[]}=JSON.parse(localStorage.getItem(Lt)||"{}");this.date=t,this.expIds=new Set(n),this.experiencedExpIds=new Set(i),this.checkDate()}experienced(t){return this.experiencedExpIds.has(t.id)}async update(t,n){this.checkDate();const i=t.filter(s=>s.type==="LL"&&!!s.cancellable);for(const s of i)this.experiencedExpIds[s.modifiable?"delete":"add"](s.id);const o=this.expIds;this.expIds=new Set(i.map(s=>s.id));for(const s of o){if(this.expIds.has(s))continue;const{ineligible:a}=await n.guests({id:s,park:{id:"0"}}),c=a.some(d=>d.ineligibleReason==="EXPERIENCE_LIMIT_REACHED");this.experiencedExpIds[c?"add":"delete"](s)}localStorage.setItem(Lt,JSON.stringify({date:this.date,expIds:[...this.expIds],experiencedExpIds:[...this.experiencedExpIds]}))}checkDate(){const t=D().date;this.date!==t&&(this.date=t,this.expIds=new Set,this.experiencedExpIds=new Set)}}const ai=e=>e.sort((t,n)=>+n.primary-+t.primary||+n.preselected-+t.preselected||t.name.localeCompare(n.name)),Rt=e=>`/application/v1/guest/${e}`;class Oe extends je{async getQueues(){var n;const t=await Ve(this.origin+Rt("getQueues"));if(!Array.isArray((n=t.data)==null?void 0:n.queues))throw new ie(t);return t.data.queues.filter(i=>!!i.categoryContentId).map(({queueId:i,tabContentId:o="",...s})=>({...s,id:i,park:this.data.parks.get(o.split(";")[0])}))}async getQueue(t){const n=(await this.getQueues()).find(i=>i.id===t.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(t){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:t.id}});return ai(n.guests.map(({guestId:i,firstName:o,lastName:s,isPrimaryGuest:a,isPreselected:c,...d})=>({...d,id:i,name:`${o} ${s}`.trim(),primary:!!a,preselected:!!c})))}async joinQueue(t,n){const i=n.map(a=>a.id),o=await this.post({resource:"joinQueue",data:{queueId:t.id,guestIds:i}}),{data:s}=o;if(s.responseStatus==="OK"){const a=s.positions.find(c=>c.queueId===t.id&&c.guestIds.length>0&&i.some(d=>c.guestIds.includes(d)));if(!a)throw new ie(o);return{boardingGroup:a.boardingGroup,conflicts:{},closed:!1}}else if(s.responseStatus==="INVALID_GUEST"||s.responseStatus==="CLOSED_QUEUE"){const a=s.responseStatus==="CLOSED_QUEUE",c=new Set,d={};for(const m of s.conflicts)for(const p of m.guestIds){const f=n.find(h=>h.id===p);f&&(d[f.id]=m.conflictType,c.add(p))}const u=n.filter(m=>!c.has(m.id));if(a||u.length===0)return{boardingGroup:null,conflicts:d,closed:a};const l=await this.joinQueue(t,u);return l.conflicts={...d,...l.conflicts},l}else throw new ie(o)}async post(t){try{return await this.request({...t,method:"POST",path:Rt(t.resource)})}catch(n){if(n instanceof ie){const i=n.response,{ok:o,status:s}=i;if(!o&&s<500&&s!==401)return i}throw n}}}C(Oe,"origins",{WDW:"https://vqguest-svc-wdw.wdprapps.disney.com",DLR:"https://vqguest-svc.wdprapps.disney.com"});const En=U({}),ci=En.Provider,H=()=>z(En),Tn=U({resort:"WDW",parks:new Map,experiences:{},drops:{}}),li=Tn.Provider,ke=()=>z(Tn),In=U({}),di=In.Provider,Qe=()=>z(In),Cn=U({goTo:()=>{},goBack:()=>{}}),ui=Cn.Provider,L=()=>z(Cn),Pn=U({current:r("div",{})}),hi=Pn.Provider,An=()=>z(Pn);let fi=0;const Mt=()=>++fi,he=()=>Number(location.hash.slice(1))||0;function Dn({children:e}){const[t,n]=I({current:e}),i=F([{elem:e,key:0}]),o=F({goTo(a,c){let d=he(),u;c!=null&&c.replace?(u=i.current[d].key??Mt(),n(l=>({...l,current:a}))):(i.current=i.current.slice(0,++d),location.hash=`#${d}`,u=Mt()),i.current[d]={elem:a,key:u}},goBack({screen:a,props:c}={}){if(a){const d=he();for(let u=d-1;u>=0;--u)if(i.current[u].elem.type===a){if(history.go(u-d),c){const l={...i.current[u].elem.props,...c};i.current[u].elem=r(a,{...l})}return}}else history.back()}});P(()=>{function a(){var u,l;const d=he();d>=i.current.length?history.back():n({current:((u=i.current[d])==null?void 0:u.elem)??r("div",{}),prev:(l=i.current[d-1])==null?void 0:l.elem})}function c(d){d.preventDefault()}return location.replace("#0"),addEventListener("hashchange",a),addEventListener("beforeunload",c),()=>{removeEventListener("hashchange",a),removeEventListener("beforeunload",c)}},[]);const s=Math.min(he(),i.current.length-1);return r(ui,{value:o.current,children:r(hi,{value:t,children:i.current.slice(0,s+1).map(({elem:a,key:c},d)=>r("article",{hidden:d!==s,children:a},c))})})}const Je={bg:"bg-blue-500",text:"text-blue-500"},Ln=U(Je),Rn=Ln.Provider,$=()=>z(Ln),pi={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function M(e){const{goBack:t}=L(),{type:n,back:i,onClick:o,className:s,...a}=e;let c=`${pi[n||"normal"]} ${s||""}`;const{bg:d}=$();return c.includes(" bg-")||(c+=` ${d} text-white`),r("button",{onClick:async()=>{o&&await o(),i&&(i===!0?t():t(i))},className:`${c} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`,...a})}function W(e){return r("div",{className:"mb-20",children:r("div",{className:"fixed bottom-0 left-0 w-full px-5 pb-5 text-center",children:r(M,{...e,className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full"})})})}function R({children:e,className:t,title:n}){return t||(t=""),t.match(/\bw-\S+\s*/)||(t+=" w-4"),t.match(/\bh-\S+\s*/)||(t+=" h-auto"),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:`mx-auto ${t}`,role:"img",children:[n&&r("title",{children:n}),e]})}/**
 * Modified arrow-left2 icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function mi(e){return r(R,{...e,children:r("path",{d:"M0.293,7.337L7.333,0.297C7.723,-0.093 8.357,-0.093 8.747,0.297C9.137,0.687 9.137,1.321 8.747,1.711L3.414,7.044L15,7.044C15.552,7.044 16,7.492 16,8.044C16,8.596 15.552,9.044 15,9.044L3.414,9.044L8.747,14.377C9.137,14.767 9.137,15.401 8.747,15.791C8.357,16.181 7.723,16.181 7.333,15.791L0.293,8.751C0.102,8.561 0,8.307 0,8.044C0,7.781 0.102,7.527 0.293,7.337Z"})})}function _i({title:e,children:t}){const{prev:n}=An(),{bg:i,text:o}=$();function s(a){return!xn(a)||typeof a.type=="string"?a:a.type===N?Ir.map(a.props.children,s):Ur(a,{className:`bg-white bg-opacity-90 ${o} ${a.props.className||""}`})}return r("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${i}`,children:[!!n&&r(M,{back:!0,className:"-my-2 -ml-3",title:"Go Back",children:r(mi,{})}),r("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap",children:e}),s(t)]})}function O({heading:e,buttons:t,footer:n,theme:i,children:o,contentRef:s}){const a=$();return i??(i=a),r(Rn,{value:i,children:r("div",{className:"fixed inset-0 flex flex-col",children:[r(_i,{title:e,children:t}),r("div",{ref:s,className:"relative flex-1 overflow-auto px-3 pb-3",children:o}),n&&r("div",{className:`relative ${i.bg} text-white font-semibold`,children:n})]})})}const $t="bg1.disclaimer.accepted",gi={bg:"bg-red-600",text:"text-red-600"};function yi(){const[e,t]=I(!!localStorage.getItem($t));return e?null:r(vi,{onAccept:()=>{localStorage.setItem($t,"1"),t(!0)}})}function vi({onAccept:e}){return r(O,{heading:"Warning!",theme:gi,children:[r("p",{children:'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'}),r(W,{onClick:e,children:"Accept"})]})}function Mn(){return r(O,{heading:"BG1 News",children:r("iframe",{src:"https://joelface.github.io/bg1/news.html",className:"absolute inset-0 w-full h-full"})})}const Ot="bg1.news.version";function bi(e){const[t,n]=I(()=>{const i=Number(localStorage.getItem(Ot));return Number.isInteger(i)?i:0});return t<e?r(N,{children:[r(Mn,{}),r(W,{onClick:()=>{localStorage.setItem(Ot,String(e)),n(e)},children:"Close"})]}):null}function Ke(e){const t=()=>{document.hidden||e()};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}const xi="181874e5af6";function wi(e){return"deferredUuid"in e&&e.deferredUuid!==void 0}class ki{constructor(t,n,i,o=!1){C(this,"handlers",{});C(this,"handshakeAcked",!1);C(this,"onMessage",t=>{if(t.source!==this.iframe.contentWindow||t.data==="inner.loaded")return;const n=JSON.parse(t.data);this.logging&&console.log("Message:",n);const i=n.type==="message"?n.eventName:n.type,o=this.handlers[i],s=o?o("data"in n?n.data:null):void 0;wi(n)&&this.send({type:"deferred",action:"resolve",deferredUuid:n.deferredUuid,data:s??{}})});this.iframe=t,this.resort=i,this.logging=o,this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:s})=>{n({swid:s.swid,accessToken:s.access_token,expires:new Date(s.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(t,n){this.handlers[t]=n}sendMessage(t,n){this.send({type:"message",eventName:t,data:n})}send(t){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify({...t,name:"lightbox-client-window"}),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${xi}`}}function Ni({resort:e,onLogin:t}){const n=F(null);return P(()=>{if(!n.current)return;const i=new ki(n.current,t,e);return i.open(),()=>i.close()},[e,t,n]),r("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}const Gt="bg1.genie.park",$n=U({park:{},setPark:()=>{}}),Si=({value:e,children:t})=>r($n.Provider,{value:e,children:t}),te=()=>z($n);function Ei(){const{parks:e}=ke(),[t,n]=I(()=>{const i=[...e.values()][0],{id:o=i.id,date:s=""}=JSON.parse(sessionStorage.getItem(Gt)||"{}")||{};return s===D().date&&e.get(o)||i});return P(()=>{sessionStorage.setItem(Gt,JSON.stringify({id:t.id,date:D().date}))},[t]),{park:t,setPark:n}}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ze({className:e}){return r(R,{className:e,children:r("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"})})}function Xe(e){const{children:t,color:n="bg-black",className:i="",...o}=e;return r("div",{className:`fixed inset-0 z-10 flex items-center justify-center p-2 ${n} bg-opacity-75 ${i}`,...o,children:t})}function Ti(){const{bg:e}=$();return r(Xe,{color:"bg-white",children:r("div",{className:"w-[50px] mx-auto",children:r("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${e}`,children:r(Ze,{className:"animate-spin w-full text-white"})})})})}const Ii=3e3,Ci={alert:"bg-yellow-200",error:"bg-red-200"};function On(){const[,e]=I(0),[t,n]=I(""),[i,o]=I("alert"),s=B((c,d)=>{n(c),o(d||"alert"),e(u=>(clearTimeout(u),c?self.setTimeout(()=>{n("")},Ii):u))},[]);return[t?r(Pi,{message:t,type:i}):null,s]}function Pi({message:e,type:t}){return e?r("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${Ci[t]} text-gray-800`,children:e}):null}async function Bt(e){return new Promise(t=>{setTimeout(t,e)})}const Ai=500;function K(){const[e,t]=I(0),[n,i]=On(),o=B(async(a,c={})=>{var w;const{messages:d={},minLoadTime:u=Ai}=c,l={error:"Unknown error occurred",request:"Network request failed",...d};i("");let m=()=>null;const p=new Promise(y=>{m=()=>y(null)});async function f(...y){await p,i(...y)}t(y=>y+1);const h=Bt(u);try{await a(f)}catch(y){const k=(w=y==null?void 0:y.response)==null?void 0:w.status;Number.isInteger(k)?f(k in l?l[k]:l.request,"error"):(console.error(y),f(l.error,"error"))}await h,await Bt(0),t(y=>y-1),m()},[i]),s=e>0||n?r(N,{children:[e>0&&r(Ti,{}),n]}):null;return{loadData:o,loaderElem:s,flash:i}}function Gn(e){const[,t]=I(0);return B((n=0)=>{t(i=>Date.now()-i<n?i:(e(),Date.now()))},[e])}const Bn=U({plans:[],refreshPlans:()=>{},loaderElem:null}),Di=Bn.Provider,Ne=()=>z(Bn);function Li(){const e=H(),{loadData:t,loaderElem:n}=K(),[i,o]=I([]),s=Gn(B(()=>{t(async()=>{o(await e.bookings())})},[e,t]));return P(s,[s]),{plans:i,refreshPlans:s,loaderElem:n}}const Un=U({current:void 0,begin:()=>{},end:()=>{}}),Ri=Un.Provider,ne=()=>z(Un),Mi=()=>{const[e,t]=I({current:void 0,begin:n=>{t({...e,current:n})},end:()=>{t(n=>n.current?{...n,current:void 0}:n)}});return e},zn=U({tabs:[],active:{name:"",icon:r("div",{}),component:()=>null},changeTab:()=>{},scrollPos:{get:()=>0,set:()=>{}}}),Hn=()=>z(zn);function $i({name:e,icon:t}){const n=$(),{active:i,changeTab:o}=Hn();if(!o)return null;const a=(i==null?void 0:i.name)===e?`bg-white bg-opacity-90 ${n.text}`:`${n.bg} text-white`;return r("button",{className:"px-4 py-2",onClick:()=>o(e),children:[r("div",{className:`min-w-[3rem] rounded-full py-1.5 ${a}`,children:t}),r("div",{className:"mt-0.5 text-sm",children:e})]})}function qe({heading:e,buttons:t,children:n,contentRef:i}){const{tabs:o,scrollPos:s,footer:a}=Hn();let c=F(null);return i&&(c=i),mn(()=>{const d=c.current;if(!d)return;d.scroll(0,s.get());const u=()=>s.set(d.scrollTop);return d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)},[s]),r(O,{heading:e,buttons:t,footer:r(N,{children:[r("div",{className:"flex items-center justify-center",children:o.map(d=>ge($i,{...d,key:d.name}))}),a]}),contentRef:c,children:n})}function Oi({tabs:e,footer:t},n){return function i({tabName:o}){const{goTo:s}=L(),a=B(u=>{u!==o&&s(r(i,{tabName:u}),{replace:!0})},[o,s]),c=F(Object.fromEntries(e.map(u=>[u.name,0]))),d=e.find(({name:u})=>u===o);return d?r(zn.Provider,{value:{tabs:e,active:d,changeTab:a,scrollPos:{get:()=>c.current[d.name],set:u=>{c.current[d.name]=u}},footer:t},children:r(n,{tab:d})}):null}}const Wn=U({experiences:[],refreshExperiences:()=>{},loaderElem:null}),Gi=Wn.Provider,et=()=>z(Wn);function Bi(){const e=H(),{park:t}=te(),{loadData:n,loaderElem:i}=K(),[o,s]=I([]),a=Gn(B(()=>{n(async()=>{s(await e.experiences(t))})},[t,e,n]));return P(a,[a]),P(()=>s([]),[t]),{experiences:o,refreshExperiences:a,loaderElem:i}}/**
 * Calendar icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Fn({className:e}){return r(R,{className:e,children:r("path",{d:"M5 6h2v2h-2zM8 6h2v2h-2zM11 6h2v2h-2zM2 12h2v2h-2zM5 12h2v2h-2zM8 12h2v2h-2zM5 9h2v2h-2zM8 9h2v2h-2zM11 9h2v2h-2zM2 9h2v2h-2zM13 0v1h-2v-1h-7v1h-2v-1h-2v16h15v-16h-2zM14 15h-13v-11h13v11z"})})}/**
 * Clock icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ui(e){return r(R,{...e,children:r("path",{d:"M10.293 11.707l-3.293-3.293v-4.414h2v3.586l2.707 2.707zM8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"})})}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ge(e){return r(R,{...e,children:r("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"})})}/**
 * Checkmark icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ut({className:e}){return r(R,{className:e,children:r("path",{d:"M13.5 2l-7.5 7.5-3.5-3.5-2.5 2.5 6 6 10-10z"})})}/**
 * Arrow-down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function zt(e){return r(R,{...e,children:r("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"})})}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function zi(e){return r(R,{...e,children:r("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"})})}function Vn({bg:e,experiences:t,heading:n}){return r("div",{className:`mt-4 rounded ${e}`,children:[r("h3",{className:"mt-0 p-1 text-white text-center",children:n}),r("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90",children:t.map(i=>r("li",{children:i.name},i.id))})]})}function ee({date:e,time:t,...n}){return r("time",{...n,dateTime:e||t,children:e?Vr(e):t?J(t):""})}function Se({start:e,end:t,timeOnly:n}){const i=Hi({start:e,end:t}),o=t?r(N,{children:[i.start?r(ee,{time:i.start}):r("span",{children:"Park Open"})," \u2013"," ",i.end?r(ee,{time:i.end}):r("span",{children:"Park Close"})]}):r(ee,{time:e.time});if(n)return o;const s=D().date;return r("table",{className:"mt-4 text-lg",children:r("tbody",{children:[r(Ht,{label:t?"Arrive by":"Reservation at",data:o}),(t==null?void 0:t.date)&&t.date>(e.date??s)&&r(Ht,{label:"Valid until",data:r(ee,{date:t.date})})]})})}function Ht({label:e,data:t}){return r("tr",{children:[r("th",{className:"text-right",children:[e,":"]}),r("td",{className:"pl-2 font-semibold",children:t})]})}function Hi({start:e,end:t}){const n=D().date;return{start:(e.date||"")<n?void 0:e.time,end:t==null?void 0:t.time}}const Wt=r("span",{"aria-hidden":!0,children:"\u2022"});function jn({booking:e,button:t}){const n=$();return r("div",{className:"flex items-center gap-x-3",children:[r("div",{className:"flex-1 min-w-0",children:[r("div",{className:"flex items-center gap-x-2 text-gray-500 text-sm font-semibold uppercase",children:[e.subtype==="DAS"&&r(N,{children:[r("span",{children:"DAS"}),Wt]}),e.type==="BG"?r(N,{children:[r("span",{children:["BG\u200A",e.boardingGroup]}),e.status==="SUMMONED"&&r(N,{children:[Wt,r("span",{className:`${n.text} font-bold`,children:"Board Now"})]})]}):r(Se,{...e,timeOnly:!0})]}),r("div",{className:"text-lg font-semibold leading-snug truncate",children:e.choices?"Multiple Experiences":e.name})]}),t&&r("div",{children:t})]})}function Yn(){const e=ne(),t=$();return e.current?r("div",{className:`sticky top-0 -mx-3 pb-1 ${t.bg}`,children:r("div",{className:"pb-3 bg-white",children:[r("div",{className:`pb-1 ${t.bg} text-white text-sm font-semibold uppercase text-center`,children:"Modifying Reservation"}),r("div",{className:"mt-2 px-3",children:r(jn,{booking:e.current,button:r(M,{type:"small",back:{screen:xe},onClick:e.end,children:"Keep"})})})]})}):null}function G({guests:e,selectable:t,conflicts:n}){return e.length===0?null:r("ul",{className:"mt-2",children:e.map(i=>{var o;return r("li",{className:"px-3 py-1",children:r("label",{className:"flex items-center",children:[t&&r("input",{type:"checkbox",checked:t.isSelected(i),onChange:()=>t.onToggle(i),className:"mr-3"}),r("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white",children:i.avatarImageUrl?r("img",{src:i.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):r("span",{"aria-hidden":"true",children:i.name[0]})}),r("span",{className:"leading-tight",children:[i.name,r("br",{}),(n==null?void 0:n[i.id])&&r("span",{className:"text-xs font-semibold text-red-700 uppercase",children:(o=n[i.id])==null?void 0:o.replace(/_/g," ")})]})]})},i.id)})})}const Qn="bg1.genie.partyIds";function Jn(){const e=JSON.parse(localStorage.getItem(Qn)||"[]");return Array.isArray(e)?e:[]}function Wi(){const e=H();P(()=>e.setPartyIds(Jn()),[e])}function Fi(){const e=H(),{loadData:t,loaderElem:n}=K(),[i,o]=I(!0),[s,a]=I(),[c,d]=I(()=>{const f=new Set(Jn());return o(f.size===0),f});function u(){const f=[...c];localStorage.setItem(Qn,JSON.stringify(f)),e.setPartyIds(f)}P(()=>{t(async()=>{const f=await e.guests();a([...f.eligible,...f.ineligible].sort((h,w)=>+!h.primary-+!w.primary||h.name.localeCompare(w.name)))})},[e,t]),P(()=>{i&&d(new Set)},[i]);const l=s==null?void 0:s.filter(f=>c.has(f.id)),m=s==null?void 0:s.filter(f=>!c.has(f.id)),p=f=>r("li",{children:r("label",{className:"flex items-center mt-2",children:[r("input",{type:"radio",name:"auto",onChange:()=>o(f.auto),checked:i===f.auto,className:"mr-2"})," ",f.children]})});return r(O,{heading:"Party Selection",children:[r("p",{children:"By default, all eligible guests (up to a maximum of 12) are automatically selected when you book a Lightning Lane. If you would like to limit who you book for, you can manually select your party here."}),r("ul",{children:[r(p,{auto:!0,children:"Book for all eligible guests"}),r(p,{auto:!1,children:"Only book for selected guests"})]}),i?null:(s==null?void 0:s.length)===0?r("p",{className:"text-red-700",children:"No guests to select"}):l&&m?r(N,{children:[l.length>0&&r(N,{children:[r("h3",{children:"Your Party"}),r(G,{guests:l,selectable:{isSelected:()=>!0,onToggle:f=>{const h=new Set(c);h.delete(f.id),d(h)}}})]}),m.length>0&&r(N,{children:[r("h3",{children:"Add to Your Party"}),r(G,{guests:m,selectable:{isSelected:()=>!1,onToggle:f=>{const h=new Set(c);h.add(f.id),d(h)}}})]})]}):null,n,r(W,{back:!0,disabled:!i&&c.size===0,onClick:u,children:"Save"})]})}function Ee({name:e,onClick:t,...n}){return r(M,{...n,title:`Refresh ${e}`,onClick:t,children:r(Ze,{})})}const Kn=U({eligible:[],ineligible:[],selected:[],setSelected:()=>null,experience:{name:"",park:{name:"",theme:{bg:"",text:""}}}}),Zn=Kn.Provider,Xn=()=>z(Kn),Vi="https://bg1.joelface.com/ping",Ft="bg1.ping.date";async function qn(){const{date:e}=D();if(localStorage.getItem(Ft)===e)return;const{ok:n}=await Ve(Vi,{method:"POST"});n&&localStorage.setItem(Ft,e)}function ji(e){return r(R,{...e,children:r("path",{d:"M 5.5253906 0.9296875 L 3.4042969 3.0507812 L 8.3535156 8 L 3.4042969 12.949219 L 5.5253906 15.070312 L 10.474609 10.121094 L 12.595703 8 L 10.474609 5.8789062 L 5.5253906 0.9296875 z"})})}function er(e){return r("div",{className:`mt-4 border-2 rounded border-green-600 p-1 font-semibold text-center text-green-600 bg-green-100 ${e.className}`,children:e.children})}function Yi({booking:e,onCancel:t}){const n=H(),{refreshPlans:i}=Ne(),[o,s]=I(new Set),{loadData:a,loaderElem:c}=K(),{name:d,park:u,guests:l}=e,m=o.size===0,p=o.size===l.length;async function f(){m||(await a(async()=>{await n.cancelBooking([...o]),p&&i()}),t(l.filter(h=>!o.has(h))))}return r(O,{heading:"Cancel Guests",theme:u.theme,children:[r("h2",{children:d}),r("div",{children:u.name}),r(Se,{...e}),r("div",{className:"ml-3",children:r("label",{className:"flex items-center py-4",children:[r("input",{type:"checkbox",checked:p,onChange:()=>s(new Set(p?[]:l))}),r("span",{className:"ml-3",children:"Select All"})]})}),!m&&r("div",{className:"mb-4",children:[r("h3",{children:"Cancel These Guests"}),r(G,{guests:l.filter(h=>o.has(h)),selectable:{isSelected:()=>!0,onToggle:h=>{const w=new Set(o);w.delete(h),s(w)}}})]}),!p&&r("div",{children:[r("h3",{children:"Select Guests to Cancel"}),r(G,{guests:l.filter(h=>!o.has(h)),selectable:{isSelected:()=>!1,onToggle:h=>s(new Set(o).add(h))}})]}),r(W,{back:!0,disabled:m,onClick:f,children:"Cancel "+(p?"Reservation":"Guests")}),c]})}function tr({booking:e,isNew:t}){var x;const{goTo:n,goBack:i}=L(),{setPark:o}=te(),{parks:s}=ke(),{name:a,park:c,choices:d,type:u,start:l}=e,m=u==="LL",p=u==="BG",f=ne(),[h,w]=I(m?e.guests:void 0),y=new Map([[c,[]],...[...s.values()].map(_=>[_,[]])]);for(const _ of d||[])(x=y.get(_.park))==null||x.push(_);const k=[...y].filter(([,_])=>_.length>0).map(([_])=>_),b=(d?k.length===1?k[0]:{}:c).theme??Je;return r(O,{heading:"Your "+(m?e.subtype==="DAS"?"DAS Return Time":"Lightning Lane":p?"Boarding Group":"Reservation"),theme:b,buttons:e.modifiable&&r(M,{onClick:()=>{f.begin(e),o(e.park),i({screen:xe,props:{tabName:"Genie+"}})},children:"Modify"}),children:[r("div",{className:`-mx-3 px-2 py-1 text-center ${b.bg} text-white text-sm font-semibold uppercase`,children:r(ee,{date:l.date})}),d?r("h2",{children:"Multiple Experiences"}):r(N,{children:[r("h2",{children:a}),r("div",{children:c.name})]}),p?r(N,{children:[e.status==="SUMMONED"&&r(er,{children:"Your boarding group has been called"}),r("h3",{children:["Boarding Group:"," ",r("span",{className:"ml-1 font-semibold",children:e.boardingGroup})]}),r("p",{children:"Check the official Disney app for return time and other virtual queue information."})]}):r(Se,{...e}),d&&r(N,{children:[r("p",{children:[r("b",{children:a})," was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"]}),[...y].filter(([,_])=>_.length>0).map(([_,S])=>r(Vn,{heading:_.name,experiences:S,bg:_.theme.bg},_.id))]}),r("div",{className:"flex mt-4",children:[r("h3",{className:"inline mt-0",children:"Your Party"}),e.cancellable&&h&&r(M,{type:"small",onClick:()=>{n(r(Yi,{booking:{...e,guests:h},onCancel:_=>{_.length>0?w(_):i()}}))},className:"ml-3",children:"Cancel"})]}),r(G,{guests:h||e.guests,conflicts:h&&Object.fromEntries(h.filter(_=>(_.redemptions??1)!==1).map(_=>[_.id,`Redemptions left: ${_.redemptions}`]))}),t&&r(W,{onClick:()=>i({screen:xe,props:{tabName:"Plans"}}),children:"Show Plans"})]})}function nr({...e}){var l,m;const{plans:t,refreshPlans:n,loaderElem:i}=Ne(),{goTo:o}=L(),s=$();function a(p){o(r(tr,{booking:p}))}const c=D().date,d=new Map,u=new Map;for(const p of t){const f=p.start.date??c;d.has(f)||d.set(f,[]),p.type!=="APR"&&((l=d.get(f))==null||l.push(p)),u.has(f)||u.set(f,new Set),(p.type!=="LL"||p.subtype!=="MEP")&&p.park.icon&&((m=u.get(f))==null||m.add(p.park))}return r(qe,{heading:"Your Plans",buttons:r(Ee,{name:"Plans",onClick:n}),theme:Je,...e,children:[t.length>0?[...d].map(([p,f])=>r("div",{children:[r("div",{className:"sticky top-0 -mx-3 pt-1 bg-white",children:r("div",{className:"flex items-center",children:[r("h2",{className:`flex-1 mt-0 rounded-r-full px-3 py-1 ${s.bg} text-white text-sm uppercase`,children:r(ee,{date:p})}),r("ul",{className:"px-3 pl-2 text-lg text-right",children:[...u.get(p)??[]].map(h=>r("li",{className:"inline ml-1 first:ml-0","aria-label":h.name,children:h.icon},h.id))})]})}),r("ul",{className:f.length===0?"mt-3":"",children:f.map(h=>r("li",{className:"py-2.5 first:border-0 border-t-4 border-gray-300",onClick:()=>a(h),children:r(jn,{booking:h,button:r("button",{className:s.text,title:"More Info",children:r(ji,{})})})},h.bookingId))})]},p)):r("p",{className:"font-semibold text-center uppercase text-gray-500",children:"No existing plans"}),i]})}function Qi({...e}){const{goTo:t}=L();return r(N,{children:r(M,{...e,onClick:()=>t(r(nr,{})),title:"Plans",children:r(Fn,{})})})}function tt(){const{ineligible:e}=Xn();return r(G,{guests:e,conflicts:Object.fromEntries(e.map(t=>[t.id,t.eligibleAfter?`TOO EARLY (${J(t.eligibleAfter)})`:t.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function Ji(){const e=H(),t=ne();return r(N,{children:[e.nextBookTime&&r(er,{children:["Eligible at ",J(e.nextBookTime)]}),t.current?r(N,{children:[r("h3",{children:"Unable to Modify"}),r("p",{children:"Your current reservation cannot be modified to this experience due to the following conflicts:"})]}):r(N,{children:[r("h3",{children:"No Eligible Guests"}),r("p",{children:"No one in your party is currently eligible for this Lightning Lane."})]}),r(tt,{})]})}function Ki({onRefresh:e}){return r(N,{children:[r("h3",{children:"No Guests Found"}),r("p",{children:"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."}),r(W,{onClick:e,children:"Try Again"})]})}function Zi(e){return r("div",{className:`mt-4 border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100 ${e.className}`,children:e.children})}function Xi({party:e}){const{eligible:t,ineligible:n,selected:i,setSelected:o,experience:s}=e,[a,c]=I(new Set(i)),[d,u]=On(),{maxPartySize:l}=H();function m(p){c(f=>{u(""),f=new Set(f);const h=f.has(p)?"delete":"add";return h==="add"&&f.size>=l?u(`Maximum party size: ${l}`):f[h](p),f})}return r(Zn,{value:e,children:r(O,{heading:"Modify Party",theme:s.park.theme,children:[r("h2",{children:s.name}),r("div",{children:s.park.name}),r("h3",{children:"Your Party"}),r(G,{guests:t,selectable:{isSelected:p=>a.has(p),onToggle:m}}),n.length>0&&r(N,{children:[r("h3",{children:"Ineligible Guests"}),r(tt,{})]}),r(W,{back:!0,disabled:a.size===0,onClick:()=>{o(t.filter(p=>a.has(p)))},children:"Confirm Party"}),d]})})}function nt({button:e}){const{goTo:t}=L(),n=Xn(),{eligible:i,selected:o}=n,{maxPartySize:s}=H();return r(N,{children:[i.length>s&&o.length===s&&r(Zi,{children:"Party size restricted"}),o.length>0?r(N,{children:[r("div",{className:"mt-4",children:[r("h3",{className:"inline mt-0",children:"Your Party"}),r(M,{type:"small",onClick:()=>t(r(Xi,{party:n})),className:"ml-3",children:"Modify"})]}),r(G,{guests:o})]}):r(N,{children:[r("h3",{children:"Ineligible Guests"}),r(tt,{})]}),e]})}function qi(){return r(N,{children:[r("h3",{children:"No Reservations Available"}),r("p",{children:"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."}),r(nt,{})]})}function es({offer:e,onBook:t}){const n=ne();return r(N,{children:[r(Se,{...e}),e.changed&&r("div",{className:"text-sm",children:[r("strong",{children:"Note:"})," Return time has been changed"]}),r(nt,{button:r(W,{onClick:t,children:`${n.current?"Modify":"Book"} Lightning Lane`})})]})}const Vt="https://widget.time.is/t.js";function ts(){if([...document.scripts].some(t=>t.src===Vt))return;const e=document.createElement("script");e.src=Vt,e.onload=rr,document.head.appendChild(e)}const me={};function rr(){"time_is_widget"in self&&self.time_is_widget.init(me)}function ns(e){ts(),me[e]||(me[e]={}),rr()}function ir(e,t){const n=document.getElementById(e);if(!n||n.firstElementChild)return t();n.textContent=D().time,setTimeout(()=>ir(e,t),100)}function rs({id:e,onSync:t}){return P(()=>{ns(e),ir(e,t)},[e,t]),r("time",{id:e})}const is={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},ss=5e3;function sr({resort:e,time:t,label:n}){const i=is[e],[o,s]=I(null);P(()=>{setTimeout(()=>s(c=>c||!1),ss)},[]);const a=B(()=>s(!0),[]);return r("table",{className:"mt-4 mx-auto text-gray-500",children:r("tbody",{children:[r(jt,{heading:n,time:r("time",{children:t||"--:--:--"})}),r(jt,{heading:r("a",{href:`https://time.is/${i.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer",children:"Current time"}),time:r(N,{children:[r(rs,{id:i,onSync:a}),o===!1&&r("span",{className:"text-sm font-sans font-semibold text-red-600",children:[" ","(unsynced)"]})]})})]})})}function jt({heading:e,time:t}){return r("tr",{children:[r("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase",children:[e,":"]}),r("td",{className:"text-xl font-mono leading-tight",children:["\uFEFF",t]})]})}function os({startTime:e,onRefresh:t}){return r(N,{children:[e?r(N,{children:[r(sr,{resort:"WDW",time:e,label:"Booking start"}),r("p",{children:["At"," ",r("time",{dateTime:e,className:"font-semibold",children:J(e)}),", tap the ",r("span",{className:"font-semibold",children:"Check Availability"})," ","button below to start booking this Lightning Lane."]})]}):r("p",{children:"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."}),r(nt,{button:r(W,{onClick:t,children:"Check Availability"})})]})}function as({experience:e}){const{goTo:t}=L(),n=H(),{refreshPlans:i}=Ne(),o=ne(),[s,a]=I(),[c,d]=I(!e.flex.available&&e.flex.enrollmentStartTime!==void 0),[u,l]=I(c?null:void 0),{loadData:m,loaderElem:p}=K();async function f(){!u||!s||m(async()=>{let x=null;x=await n.book(u,o.current,s.selected),o.end();const _=new Set(s.selected.map(E=>E.id)),S=x.guests.filter(E=>!_.has(E.id));S.length>0&&(await n.cancelBooking(S),x.guests=x.guests.filter(E=>_.has(E.id))),x&&t(r(tr,{booking:x,isNew:!0}),{replace:!0}),i(),qn()},{messages:{410:"Offer expired"}})}function h(){m(async x=>{var E;const S=(await n.experiences(e.park)).find(v=>v.id===e.id);(E=S==null?void 0:S.flex)!=null&&E.available?(d(!1),l(void 0)):x("Reservations not open yet")})}const w=B(()=>{m(async()=>{const x=o.current?{eligible:o.current.guests,ineligible:[]}:await n.guests(e);a({...x,selected:x.eligible.slice(0,n.maxPartySize),setSelected:_=>a(S=>{if(!S)return S;const E=new Set(S.selected);return d(v=>(v||l(T=>T===null||_.some(V=>!E.has(V))?void 0:T),v)),{...S,selected:_}}),experience:e})})},[n,e,o,m]);P(()=>{s||w()},[s,w]);const y=B(x=>{!s||s.selected.length===0||m(async()=>{try{const _=await n.offer(e,s.selected,o.current),{ineligible:S}=_.guests;if(S.length>0){const E=new Set(S.map(T=>T.id)),v=T=>!E.has(T.id);a({...s,eligible:s.eligible.filter(v),ineligible:[...S,...s.ineligible],selected:s.selected.filter(v)})}_.active?(u&&(_.changed=!1),l(_)):l(E=>E??null)}catch(_){throw x||l(null),_}},{messages:{410:u?"No reservations available":""}})},[n,e,s,u,o,m]);P(()=>{u===void 0&&y()},[u,y]);const k=(s==null?void 0:s.eligible.length)===0,b=k&&(s==null?void 0:s.ineligible.length)===0;return r(O,{heading:"Lightning Lane",theme:e.park.theme,buttons:r(N,{children:[r(Qi,{}),!c&&r(Ee,{onClick:()=>{k?w():y()},name:k?"Party":"Offer"})]}),children:[r(Yn,{}),r("h2",{children:e.name}),r("div",{children:e.park.name}),s&&r(Zn,{value:s,children:c&&s?r(os,{startTime:e.flex.enrollmentStartTime,onRefresh:h}):b?r(Ki,{onRefresh:w}):k?r(Ji,{}):!s||u===void 0?r("div",{}):u===null?r(qi,{}):r(es,{offer:u,onBook:f})}),p]})}function rt({label:e,children:t}){return r("div",{className:"flex items-center flex-1 whitespace-nowrap",children:[r("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500",children:e})," ",t]})}function cs({experience:e}){const{goTo:t}=L(),{flex:n}=e;return r(rt,{label:"Genie+",children:r("span",{children:r(M,{onClick:()=>t(r(as,{experience:e})),children:n.nextAvailableTime?J(n.nextAvailableTime):"none"})})})}function or({children:e}){return r("div",{className:"mt-8 flex justify-center",children:r("div",{children:[r("h2",{className:"mt-0 pl-1 text-gray-500 text-sm leading-tight uppercase",children:"Symbols"}),r("div",{className:"border-2 border-gray-500 rounded px-2 py-0.5 bg-gray-100",children:r("table",{children:r("tbody",{children:e})})})]})})}function oe({sym:e,def:t,onInfo:n}){return r("tr",{children:[r("th",{className:"py-0.5 text-center font-bold",children:e}),r("td",{className:"pl-3 py-0.5",children:t}),n&&r("td",{className:"pl-3 py-0.5",children:r(M,{type:"small",onClick:n,children:"Info"})})]})}const ls="_SELECT_RADIO_BUTTON_";function ar(e){const{options:t,selected:n,title:i,onChange:o,...s}=e,[a,c]=I(!1),[d,u]=I(0),l=F(null),m=F(null);mn(()=>{var E;if((E=t.values().next().value)!=null&&E.icon)return;const b=l.current,x=b==null?void 0:b.firstChild;if(!x)return;const _=x.nodeValue;if(!_)return;let S=0;for(const v of t.values())x.nodeValue=v.text,S=Math.max(b.offsetWidth,S);x.nodeValue=_,u(S)},[t]);const p=()=>{var b;return(b=m.current)==null?void 0:b.querySelector("input:checked")};P(()=>{var _;if(!a)return;const b=p();(_=b==null?void 0:b.closest("li"))==null||_.scrollIntoView(),b==null||b.focus();const x=S=>{var E;(E=m.current)!=null&&E.contains(S.target)||c(!1)};return addEventListener("focusin",x),()=>removeEventListener("focusin",x)},[a]);const f=()=>{const b=p();if(b){const x=b.value,_=t.get(x);_&&o(_.value??x)}c(!1)},h=t.get(n);if(!h)return null;const{icon:w,text:y}=h;let k=!1;return r(N,{children:[r(M,{...s,title:w?`${i}: ${h.text}`:i,onClick:()=>c(!0),children:[w||r("span",{className:"flex-1 truncate",style:{minWidth:`${d}px`},ref:l,children:y}),r(R,{className:"w-2.5 ml-2 shrink-0",children:r("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"})})]}),a&&r(Xe,{onChange:()=>{k||f(),k=!1},onClick:b=>{var x;k||(!((x=m.current)!=null&&x.contains(b.target))||b.target.value===n)&&(c(!1),b.preventDefault())},onKeyDown:({key:b})=>{["Enter"," "].includes(b)?f():b.startsWith("Arrow")&&(k=!0)},"data-testid":"shade",children:r("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",ref:m,children:[...t].map(([b,x])=>r("li",{className:"border-t-2 first:border-0 border-gray-300",children:r("label",{className:"flex flex-row items-center gap-x-2.5 px-4 py-3",children:[r("input",{type:"radio",name:ls,value:b,defaultChecked:b===n,className:"w-4 h-4 shrink-0"})," ",x.icon&&r("span",{"aria-hidden":"true",children:x.icon})," ",x.text]})},x.text))})})]})}function cr(e){const{parks:t}=ke(),{park:n,setPark:i}=te(),o=We(()=>new Map([...t.values()].map(s=>[s.id,{value:s,icon:s.icon,text:s.name}])),[t]);return r(ar,{...e,options:o,selected:n.id,onChange:i,title:"Park","data-testid":"park-select"})}function ds({experience:{type:e,standby:t}}){return t.displayNextShowTime||e==="ENTERTAINMENT"&&!t.waitTime?r(hs,{standby:t}):r(us,{standby:t})}const us=({standby:e})=>r(rt,{label:"Standby",children:e.available?r(dr,{time:e.waitTime!==void 0?e.waitTime+" min":"now"}):r(ur,{text:"down"})}),hs=({standby:e})=>r(rt,{label:r(N,{children:["Next ",r("span",{className:"hidden xs:inline",children:"Show"})]}),children:e.displayNextShowTime?r(dr,{time:e.displayNextShowTime}):r(ur,{text:"none"})}),lr="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",dr=({time:e})=>r("span",{className:`${lr} border-gray-500 text-gray-500 bg-gray-100`,children:e}),ur=({text:e})=>r("span",{className:`${lr} border-red-600 text-red-600 bg-red-100`,children:e});function fs({bookTime:e,dropTime:t}){const n=$();return!e&&!t?null:r("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`,children:[r(Yt,{label:"Book",time:e}),r(Yt,{label:"Drop",time:t})]})}function Yt({label:e,time:t}){if(!t)return null;t=t.slice(0,5);const n=D().time.slice(0,5);return r("div",{children:[e,":"," ",r("time",{dateTime:t,className:"whitespace-nowrap",children:t>n?J(t):"now"})]})}async function ps(e={}){return new Promise((t,n)=>{navigator.geolocation.getCurrentPosition(i=>{t(i)},i=>{n(i)},e)})}const ms={maximumAge:15e3,timeout:2e3};function _s(){const[e,t]=I(),n=B(()=>{(async()=>{try{const{coords:i}=await ps(ms);t(o=>o&&i.latitude===o[0]&&i.longitude===o[1]?o:[i.latitude,i.longitude])}catch{t(void 0)}})()},[]);return[e,n]}const gs=(e,t)=>(e.priority||1/0)-(t.priority||1/0),Pe=(e,t)=>(t.standby.waitTime||-1)-(e.standby.waitTime||-1),Ae=(e,t)=>{var n,i;return be(((n=e==null?void 0:e.flex)==null?void 0:n.nextAvailableTime)||"00:00")-be(((i=t==null?void 0:t.flex)==null?void 0:i.nextAvailableTime)||"00:00")},ys=(e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()),Qt=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)),vs=(e,t,n)=>e.geo===t.geo?0:e.geo?t.geo?n?Qt(e.geo,n)-Qt(t.geo,n):0:-1:1,bs={priority:(e,t)=>gs(e,t)||Pe(e,t)||Ae(e,t),standby:(e,t)=>Pe(e,t)||Ae(e,t),soonest:(e,t)=>Ae(e,t)||Pe(e,t),nearby:(e,t,n)=>vs(e,t,n),aToZ:()=>0},xs=new Map([["priority",{text:"Priority"}],["nearby",{text:"Nearby"}],["standby",{text:"Standby"}],["soonest",{text:"Soonest"}],["aToZ",{text:"A to Z"}]]);function ws(e,t){const{n,s:i,e:o,w:s}=e.geo,[a,c]=t;return a<n&&a>i&&c<o&&c>s}function ks(){const{park:e}=te(),{experiences:t}=et(),[n,i]=_s(),[o,s]=I("priority");P(()=>{o==="nearby"&&i()},[t,o,i]);const a=(d,u)=>{var l,m;return Number((l=u==null?void 0:u.flex)==null?void 0:l.available)-Number((m=d==null?void 0:d.flex)==null?void 0:m.available)||bs[o==="nearby"&&!(n&&ws(e,n))?"priority":o](d,u,n)||ys(d,u)},c=B(d=>r(ar,{...d,options:xs,selected:o,onChange:s,title:"Sort By"}),[o]);return{sorter:a,SortSelect:c}}const Ns=30,Ss=60,Jt="bg1.genie.tipBoard.starred",Be="Lightning Pick",Ue="Upcoming Drop",ze="Booked",Kt=e=>e.experienced&&!e.starred;function Es({contentRef:e}){Wi();const{goTo:t}=L(),n=H(),{park:i}=te(),{experiences:o,refreshExperiences:s,loaderElem:a}=et(),{sorter:c,SortSelect:d}=ks(),u=$(),[l,m]=I(()=>{const v=JSON.parse(localStorage.getItem(Jt)||"[]");return new Set(Array.isArray(v)?v:[])}),p=F(!0);P(()=>{var v;p.current?p.current=!1:(v=e.current)==null||v.scroll(0,0)},[d,e]);function f({id:v}){m(T=>(T=new Set(T),T.has(v)?T.delete(v):T.add(v),localStorage.setItem(Jt,JSON.stringify([...T])),T))}const h=n.nextDropTime(i),w=()=>t(r(Is,{})),y=()=>t(r(Cs,{dropTime:h,park:i})),k=()=>t(r(Ps,{})),b=v=>r("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",children:[r("div",{className:"flex items-center gap-x-2 mt-2",children:[r(Ts,{experience:v,toggleStar:f}),r("h3",{className:"flex-1 mt-0 text-lg font-semibold leading-tight truncate",children:v.name}),v.lp?r(De,{name:Be,icon:Ge,onClick:w}):h&&v.drop?r(De,{name:Ue,icon:zt,onClick:y}):null,v.flex.preexistingPlan&&r(De,{name:ze,icon:Ut,onClick:k})]}),r("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[r(ds,{experience:v}),r(cs,{experience:v})]})]},v.id+(v.starred?"*":"")),x=be(D().time),_=o.filter(v=>!!v.flex).map(v=>{var ot;const T=v.standby.waitTime||0,V=(ot=v==null?void 0:v.flex)==null?void 0:ot.nextAvailableTime;return{...v,lp:!!V&&T>=Ns&&be(V)-x<=Math.min(Ss,(4-Math.trunc(v.priority||4))/3*T),starred:l.has(v.id)}}).sort((v,T)=>+!v.starred-+!T.starred||+!v.lp-+!T.lp||c(v,T)),S=_.filter(v=>!Kt(v)),E=_.filter(Kt).sort((v,T)=>v.name.localeCompare(T.name));return r(qe,{heading:"Genie+",buttons:r(N,{children:[r(d,{}),r(cr,{}),r(Ee,{name:"Experiences",onClick:s})]}),contentRef:e,children:[r(Yn,{}),r(fs,{bookTime:n.nextBookTime,dropTime:h}),r("ul",{"data-testid":"unexperienced",children:S.map(b)}),E.length>0&&r(N,{children:[r("h2",{className:`-mx-3 px-3 py-1 text-sm uppercase text-center ${u.bg} text-white`,children:"Previously Experienced"}),r("ul",{"data-testid":"experienced",children:E.map(b)})]}),_.length>0&&r(or,{children:[r(oe,{sym:r(Ge,{className:u.text}),def:Be,onInfo:w}),r(oe,{sym:r(zt,{className:u.text}),def:Ue,onInfo:y}),r(oe,{sym:r(Ut,{className:u.text}),def:ze,onInfo:k})]}),a]})}function De({name:e,icon:t,onClick:n}){const i=$();return r("button",{title:`${e} (more info)`,className:`-mx-2 px-2 ${i.text}`,onClick:n,children:r(t,{})})}function Ts({experience:e,toggleStar:t}){const n=$();return r("button",{title:`${e.starred?"Remove from":"Add to"} Favorites`,className:"-m-2 p-2",onClick:()=>t(e),children:r(zi,{className:e.starred?n.text:"text-gray-300"})})}function Is(){return r(O,{heading:Be,children:r("p",{children:"When an attraction with a long standby wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"})})}function Cs({dropTime:e,park:t}){const n=H(),{bg:i}=$();return r(O,{heading:Ue,children:[r("p",{children:["This attraction may be part of the"," ",e?r("time",{dateTime:e,className:"font-semibold",children:J(e)}):"next"," ","drop of additional Lightning Lane inventory, with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"]}),n.upcomingDrops(t).map(o=>r(Vn,{heading:J(o.time),experiences:o.experiences,bg:i},o.time))]})}function Ps(){return r(O,{heading:ze,children:r("p",{children:"You currently have a Lightning Lane reservation for this attraction."})})}/**
 * Exit icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function As(e){return r(R,{...e,children:r("path",{d:"M12 10v-2h-5v-2h5v-2l3 3zM11 9v4h-5v3l-6-3v-13h11v5h-1v-4h-8l4 2v9h4v-3z"})})}/**
 * Heart icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ds(e){return r(R,{...e,children:r("path",{d:"M11.8 1c-1.682 0-3.129 1.368-3.799 2.797-0.671-1.429-2.118-2.797-3.8-2.797-2.318 0-4.2 1.882-4.2 4.2 0 4.716 4.758 5.953 8 10.616 3.065-4.634 8-6.050 8-10.616 0-2.319-1.882-4.2-4.2-4.2z"})})}/**
 * News icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ls(e){return r(R,{...e,children:r("path",{d:"M14 4v-2h-14v11c0 0.552 0.448 1 1 1h13.5c0.828 0 1.5-0.672 1.5-1.5v-8.5h-2zM13 13h-12v-10h12v10zM2 5h10v1h-10zM8 7h4v1h-4zM8 9h4v1h-4zM8 11h3v1h-3zM2 7h5v5h-5z"})})}/**
 * Cog icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Rs(e){return r(R,{...e,children:r("path",{d:"M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z"})})}/**
 * User icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ms(e){return r(R,{...e,children:r("path",{d:"M9 11.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"})})}function $s(){const{goTo:e}=L(),t=H(),[n]=I([{text:"Party Selection",icon:r(Ms,{}),action:()=>e(r(Fi,{}))},{text:"Log Out",icon:r(As,{}),action:()=>t.logOut()},{text:"BG1 News",icon:r(Ls,{}),action:()=>e(r(Mn,{}))},{text:"Support BG1",icon:r(Ds,{className:"text-red-600"}),action:()=>open("https://joelface.github.io/bg1/contact.html#donate")}]),[i,o]=I(!1),s=F(null);return r(N,{children:[r("button",{className:"absolute top-0 right-0 h-full px-4",onClick:()=>o(!0),title:"Settings Menu",children:r(Rs,{})}),i&&r(Xe,{onClick:a=>{var c;(c=s.current)!=null&&c.contains(a.target)||o(!1)},"data-testid":"shade",children:r("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black text-lg font-normal",ref:s,children:n.map(a=>r("li",{className:"border-t-2 first:border-0 border-gray-300",children:r("button",{className:"flex flex-row items-center w-full px-4 py-3",onClick:()=>{o(!1),setTimeout(a.action,50)},children:[r("span",{className:"mr-2.5 text-gray-700","aria-hidden":!0,children:a.icon}),a.text]})},a.text))})})]})}function Os({contentRef:e}){const{goTo:t}=L(),{experiences:n,refreshExperiences:i,loaderElem:o}=et(),s=c=>t(r(Gs,{exp:c})),a=new Map;return n.filter(c=>c.standby.available||c.standby.unavailableReason==="TEMPORARILY_DOWN").sort((c,d)=>c.land.sort-d.land.sort||(c.sort||1/0)-(d.sort||1/0)||c.name.localeCompare(d.name)).forEach(c=>{var d,u;a.has(c.land)||a.set(c.land,{ATTRACTION:[],ENTERTAINMENT:[],CHARACTER:[]}),(u=(d=a.get(c.land))==null?void 0:d[c.type])==null||u.push(c)}),r(qe,{heading:"Times Guide",buttons:r(N,{children:[r(cr,{}),r(Ee,{name:"Times",onClick:i})]}),contentRef:e,children:[[...a].map(([c,d])=>r("div",{children:[r("h2",{className:`pr-1 ${c.theme.text} text-sm font-semibold text-right uppercase`,children:c.name}),r("div",{className:"rounded overflow-hidden",children:[r(Le,{title:"Attractions",land:c,experiences:d.ATTRACTION,onInfoClick:s}),r(Le,{title:"Entertainment",land:c,experiences:d.ENTERTAINMENT,onInfoClick:s}),r(Le,{title:"Characters",land:c,experiences:d.CHARACTER,onInfoClick:s})]})]},c.name)),n.length>0&&r(or,{children:[r(oe,{sym:"*",def:"No listed wait/show time"}),r(oe,{sym:"\u274C",def:"Temporarily down"})]}),o]})}function Le({title:e,land:t,experiences:n,onInfoClick:i}){return n.length===0?null:r("div",{className:`${t.theme.bg}`,"data-testid":`${t.name}-${e}`,children:[r("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase",children:e}),r("table",{className:"w-full bg-white bg-opacity-90 leading-snug",children:r("tbody",{children:n.map(o=>{var s;return r("tr",{className:"group",children:[r("td",{className:`${o.standby.displayNextShowTime?"min-w-[5.625rem]":"min-w-[2.75rem]"} px-2 py-0.5 group-first:pt-1 group-last:pb-1 ${t.theme.bg} bg-opacity-10 ${t.theme.text} font-bold text-center uppercase whitespace-nowrap`,children:o.standby.displayNextShowTime?(((s=o.displayAdditionalShowTimes)==null?void 0:s.length)??0)>0?r("button",{onClick:()=>i(o),className:"underline",children:o.standby.displayNextShowTime}):o.standby.displayNextShowTime:o.standby.available?o.standby.waitTime??"*":"\u274C"}),r("td",{className:"w-full px-1 pl-2 py-0.5 group-first:pt-1 group-last:pb-1",children:o.name})]},o.id)})})})]})}const Gs=({exp:e})=>{var t;return r(O,{heading:"Experience Info",children:[r("h2",{children:e.name}),r("div",{children:e.park.name}),r("h3",{children:["Upcoming ",e.type==="CHARACTER"?"Appearances":"Shows"]}),r("ul",{className:"list-disc mt-2 pl-6",children:[!!e.standby.displayNextShowTime&&r("li",{children:e.standby.displayNextShowTime}),(t=e.displayAdditionalShowTimes)==null?void 0:t.map(n=>r("li",{children:n},n))]})]})},Zt=6e4,hr="bg1.genie.merlock.tab",Bs=()=>localStorage.getItem(hr)??"Genie+",Us=[{name:"Genie+",icon:r(Ge,{}),component:Es},{name:"Times",icon:r(Ui,{}),component:Os},{name:"Plans",icon:r(Fn,{}),component:nr}],zs=r($s,{}),xe=Oi({tabs:Us,footer:zs},({tab:e})=>{const t=ne(),{park:n}=te(),i=Bi(),{refreshExperiences:o}=i,{refreshPlans:s}=Ne(),a=F(null);return P(()=>{localStorage.setItem(hr,e.name)},[e]),P(()=>Ke(()=>{o(Zt),s(Zt)}),[o,s]),P(()=>{var c;t.current&&((c=a.current)==null||c.scroll(0,0))},[t]),r(Rn,{value:n.theme,children:r(Gi,{value:i,children:r(e.component,{contentRef:a})})})});function Hs(){return r(Di,{value:Li(),children:r(Ri,{value:Mi(),children:r(Si,{value:Ei(),children:r(Dn,{children:r(xe,{tabName:Bs()})})})})})}function fr({queue:e,screen:t}){const{current:n}=An(),{resort:i}=ke();return e.isAcceptingJoins||n.type!==t?null:r(sr,{resort:i,time:e.nextScheduledOpenTime,label:"Next queue opening"})}function it({queue:e,heading:t,children:n}){var i;return r(O,{heading:t,theme:(i=e.park)==null?void 0:i.theme,children:[r("h2",{children:e.name}),n]})}const Ws=5e3;function Fs({queue:e,guests:t,result:n}){const{boardingGroup:i,conflicts:o}=n,s=i!==null,a=t.filter(m=>!(m.id in o)),c=t.filter(m=>m.id in o),{goBack:d}=L(),[u,l]=I(!1);return P(()=>{s&&setTimeout(()=>l(!0),Ws)},[s]),r(it,{queue:e,heading:"Boarding Group",children:s?r(N,{children:[r("h3",{children:"Congratulations! \u{1F389}"}),r("p",{children:"You joined the virtual queue!"}),r("p",{className:"text-lg font-semibold",children:["Boarding Group: ",i]}),r(G,{guests:a}),Object.keys(o).length>0&&r(N,{children:[r("p",{className:"font-semibold",children:"These guests could not join:"}),r(G,{guests:c,conflicts:o})]}),r("p",{children:"Refer to the My Disney Experience app for return time and other information."}),u&&r(W,{onClick:()=>d({screen:st}),children:"Done"})]}):r(N,{children:[r("h3",{children:"Sorry!"}),r("p",{children:"A boarding group could not be obtained. Go back and try again."}),r(G,{guests:c,conflicts:o})]})})}function pr({queue:e,guests:t}){const{goTo:n}=L(),i=Qe(),{loadData:o,loaderElem:s}=K();async function a(){await o(async c=>{if(!e||!(await i.getQueue(e)).isAcceptingJoins){c("Queue not open yet");return}const d=await i.joinQueue(e,t);n(r(Fs,{queue:e,guests:t,result:d}),{replace:!0}),d.boardingGroup!==null&&qn()},{minLoadTime:999})}return r(it,{queue:e,heading:"Join Virtual Queue",children:[r(fr,{queue:e,screen:pr}),r("h3",{children:"Your Party"}),r(G,{guests:t}),r(W,{onClick:a,children:"Join Virtual Queue"}),s]})}function mr({queue:e}){const{goTo:t}=L(),n=Qe(),{loadData:i,loaderElem:o,flash:s}=K(),[a,c]=I([]),[d,u]=I(new Set);P(()=>{i(async()=>{const m=await n.getLinkedGuests(e);c(m),u(new Set(m.filter(p=>p.preselected)))})},[e,n,i]);function l(m){const p=new Set(d);p[p.has(m)?"delete":"add"](m);const f=Number(e==null?void 0:e.maxPartySize);f>0&&p.size>f?s(`Maximum party size: ${f}`):(u(p),s(""))}return r(it,{queue:e,heading:"Choose Your Party",children:[e.howToEnterMessage.split(`

`).map((m,p)=>r("p",{children:m},p)),r(fr,{queue:e,screen:mr}),r("h3",{children:"Choose Your Party"}),a.length>0?r(G,{guests:a,selectable:{isSelected:m=>d.has(m),onToggle:l}}):r("p",{children:"No guests available"}),r(W,{disabled:d.size===0,onClick:()=>t(r(pr,{queue:e,guests:[...d]})),children:"Confirm Party"}),o]})}const Xt=e=>e.categoryContentId==="attraction",re=e=>e.isAcceptingPartyCreation||e.isAcceptingJoins;function st(){const e=Qe(),{goTo:t,goBack:n}=L(),i=$(),{loadData:o,loaderElem:s}=K(),[a,c]=I([]),[d,u]=I(!1),[,l]=I(),m=B(()=>{o(async()=>{const p=await e.getQueues();p.sort((f,h)=>+re(h)-+re(f)||+Xt(h)-+Xt(f)),c(p),l(f=>{if(!f)return f;const h=p.find(w=>w.id===f.id);if(h&&re(h))return f;l(void 0),n({screen:st})}),u(!0)})},[e,n,o]);return P(()=>(m(),Ke(m)),[m]),r(O,{heading:"Virtual Queues",buttons:r(M,{title:"Refresh Queues",onClick:m,children:r(Ze,{})}),footer:r("div",{className:"p-2 text-right",children:r(M,{className:`bg-opacity-90 bg-white ${i.text}`,onClick:()=>e.logOut(),children:"Log Out"})}),children:[a.length>0?r("ul",{className:"mt-1",children:a.map(p=>r("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",children:[r("h2",{className:"mt-0",children:p.name}),r("div",{className:"flex items-center mt-2",children:[r("div",{className:"flex-1",children:p.isAcceptingJoins?r("span",{children:"Available now"}):p.nextScheduledOpenTime?r(N,{children:["Next opening:"," ",r("time",{dateTime:p.nextScheduledOpenTime,className:"font-semibold",children:J(p.nextScheduledOpenTime)})]}):"No more openings today"}),r("div",{className:"pl-3",children:r(M,{disabled:!re(p),onClick:()=>{l(p),t(r(mr,{queue:p}))},children:re(p)?"Join Queue":"Closed"})})]})]},p.id))}):d&&!s?r("p",{className:"text-gray-500 font-semibold text-center uppercase",children:"No virtual queues found"}):null,s]})}function Vs(){return r(Dn,{children:r(st,{})})}const js=1;function Ys(){document.body.addEventListener("click",()=>null)}function Qs({authStore:e}){const[t,n]=I(),[i,o]=I(r("div",{})),s=yi(),a=bi(js),[c,d]=I(()=>{try{e.getData()}catch(u){if(!(u instanceof kn))throw u;return!0}return!1});return P(()=>{Ys()},[]),P(()=>{e.onUnauthorized=()=>d(!0);for(const[u,l]of[[Dt,Hs],[Oe,Vs]])try{const m=u.originToResort(origin);n(m),Fr({WDW:"America/New_York",DLR:"America/Los_Angeles"}[m]),Zr(m).then(p=>{o(r(li,{value:p,children:r(ci,{value:new Dt(p,e),children:r(di,{value:new Oe(p,e),children:r(l,{})})})}))});return}catch(m){if(!(m instanceof Nn))throw m}location.href="https://joelface.github.io/bg1/start.html"},[e]),P(()=>{function u(){if(!c)try{e.getData(),d(!1)}catch{d(!0)}}return u(),Ke(u)},[e,c]),s||a||c&&t&&r(Ni,{resort:t,onLogin:u=>{e.setData(u),d(!1)}})||i}_r();function _r(){if(!document.body){setTimeout(_r,100);return}Js(),Ks().render(r(Qs,{authStore:new jr("bg1.auth")}))}function Js(){const e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(e)}function Ks(){return Wr(document.body.appendChild(document.createElement("div")))}
